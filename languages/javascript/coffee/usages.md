# Types
## Check
https://www.cnblogs.com/a546558309/p/3608194.html

```coffeescript
typeof 2                # number
typeof null             # object
typeof {}               # object
typeof []               # object
typeof (function(){})   # function
typeof undefined        # undefined
typeof '222'            # string
typeof true             # boolean
```

## Object
```coffeescript
singers = {Jagger: "Rock", Elvis: "Roll"}
```


# Workflows

## Loops
```coffeescript
# Eat lunch.
eat = (food) -> "#{food} eaten."
eat food for food in ['toast', 'cheese', 'wine']

# Fine five course dining.
courses = ['greens', 'caviar', 'truffles', 'roast', 'cake']
menu = (i, dish) -> "Menu Item #{i}: #{dish}" 
menu i + 1, dish for dish, i in courses

# Health conscious meal.
foods = ['broccoli', 'spinach', 'chocolate']
eat food for food in foods when food isnt 'chocolate'

```

## Functions
### Define
```coffeescript
function_name = -> function_body
```
- `->` is compiled in to `(function() {});`
- It is not mandatory to use the return keyword in CoffeeScript. Every function in CoffeeScript returns the last statement in the function automatically.

Example
```coffeescript
greet = -> "This is an example of a function"

# compile to js: coffee -c function_example.coffee
// Generated by CoffeeScript 1.10.0
(function() {
  var greet;
  
  greet = function() {
    return "This is an example of a function";
  };

}).call(this);

# Another example:
square = (x) -> x * x
```

### Arguments
```coffeescript
add = (a,b) ->
  c = a+b
  console.log "Sum of the two numbers is: "+c
```

### Default Arguments
```coffeescript
add =(a = 1, b = 2) ->
  c = a + b
  console.log "Sum of the two numbers is: "+c
add 10,20

#Calling the function with default arguments
add()
```

### Invoke
#### Placing parenthesis after its name
```coffeescript
add = ->
  a = 20; b = 30
  c = a+b
  console.log "Sum of the two numbers is: "+c  

add()
```

#### Invoking functions with arguments
```coffeescript
my_function argument_1,argument_2
or
my_function (argument_1,argument_2)

add = (a,b) ->
  c = a+b
  console.log "Sum of the two numbers is: "+c
add 10,20 
```
# Modules
## module.exports
https://blog.csdn.net/xqnode/article/details/60610885

在模块最后写好模块接口，声明这个模块对外暴露什么内容，module.exports 提供了暴露接口的方法。
```coffeescript
# app.js
var app = {
	name: 'app',
	version: '1.0.0',
	sayName: function(name){
		console.log(this.name);
	}
}
module.exports = app;

# 调用
var app = require('./app.js');
app.sayName('hello');//hello
```


# Classes
## Create
```coffeescript
class Class_Name
```

## Instantiate
```coffeescript
new Class_Name
```

## Defining a Constructor
- creating a function with name constructor
- The @ operator is an alias to the this keyword, it is used to point the instance variables of a class. If we place @ before an argument of the constructor, then it will be set as an instance variable automatically. 
```coffeescript
class Student
  constructor: (@name)->
  
# Example

#Defining a class
class Student
  constructor: (@name)->

#instantiating a class by passing a string to constructor
student = new Student("Mohammed");
console.log "the name of the student is :"+student.name
```

## Instance Properties
Properties within a class which are known as instance properties
```coffeescript
#Defining a class
class Student
  name = "Ravi"
  age = 24
  message: ->
    "Hello "+name+" how are you" 

#instantiating a class by passing a string to constructor
student = new Student();
console.log student.message()
```

## Static Properties
We create static functions using the this keyword or its alias @ symbol and we have to access these properties using the class name as Class_Name.property
```coffeescript
#Defining a class
class Student
  @message:(name) ->
    "Hello "+name+" how are you" 
console.log Student.message("Raju")
```

## Inheritance
Use extends keyword.
```coffeescript
#Defining a class
class Add
   a = 20; b = 30
   
   addition:->
     console.log "Sum of the two numbers is :"+(a+b) 

class My_class extends Add

my_class = new My_class()
my_class.addition()
```

We can invoke the constructor of the parent class from the subclass, using the `super()` keyword.
```coffeescript
#Defining a class
class Add
   constructor:(@a,@b) ->
   
   addition:=>
     console.log "Sum of the two numbers is :"+(@a+@b) 

class Mul extends Add
   constructor:(@a,@b) ->
     super(@a,@b)
   
   multiplication:->
     console.log "Product of the two numbers is :"+(@a*@b)

mul = new Mul(10,20)
mul.addition()
mul.multiplication()
```

## Dynamic Classes
CoffeeScript uses prototypal inheritance to automatically inherit all the instance properties of a class. 
```coffeescript
class Animal
  constructor: (@name) ->

class Parrot extends Animal

Animal::rip = true

parrot = new Parrot("Macaw")
console.log "This parrot is no more" if parrot.rip
```

## Example from official doc
```coffeescript
class Animal
  constructor: (@name) ->

  move: (meters) ->
    alert @name + " moved #{meters}m."

class Snake extends Animal
  move: ->
    alert "Slithering..."
    super 5

class Horse extends Animal
  move: ->
    alert "Galloping..."
    super 45

sam = new Snake "Sammy the Python"
tom = new Horse "Tommy the Palomino"

sam.move()
tom.move()
```


# I/O
## read file
```coffeescript
fs = require 'fs'
config = 'test.txt'

foo = ->
  fs.readFileSync config, 'utf8'

console.log foo()
```

## read line by line
https://nodejs.org/api/readline.html

```coffeescript
lineReader = require('readline').createInterface({
      input: require('fs').createReadStream(hosts)
    });

lineReader.on 'line', (line) ->
  robot.logger.info "Line from file: #{line}"
```
解释
- lineReader.on: Event: 'line'

# Exceptions
## try/catch
```coffeescript
try
  allHellBreaksLoose()
  catsAndDogsLivingTogether()
catch error
  print error
finally
  cleanUp()
```

# Misc
## Comments
- `#`
- `###`
```coffeescript
###
Fortune Cookie Reader v1.0
Released under the MIT License
###

sayFortune = (fortune) ->
  console.log fortune # in bed!
```
